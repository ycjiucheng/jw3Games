# 项目概述

- 在 GitHub Pages 运行的竖版塔防网页游戏，背景为「会战弓月城」
- 玩家守卫「弓月圣女」，抵抗「踏实力部落」与「鬼山会」的自上而下进攻
- 击杀敌人获得金币，消耗金币随机招募「剑网三各门派」人物
- 相同等级与同门派单位可拖拽合并升级，形成更强战力
- 纯前端、移动端优先、零后端依赖

# 世界与阵营

- 防守目标：页面底部中央的「弓月圣女」与生命值条
- 敌方阵营：踏实力部落（高攻近战、冲锋）、鬼山会（远程、毒/诅咒）
- 地形：竖版 9:16 视窗，顶部为刷新区，中下部为我方部署区与核心
- 线路：3–5 条纵向通道，随机刷新位置但保持线路权重与节奏均衡

# 核心玩法

- 敌人自页面上方生成，沿路径向下推进，触及「弓月圣女」则造成伤害
- 玩家通过金币进行随机招募门派单位，放置于部署格
- 拖拽两名同门派同等级单位进行合并，升至下一等级并强化数值与技能
- 不同门派具备差异化定位：近战拦截、远程输出、控制、辅助
- 波次系统推进难度，精英与首领穿插

# 经济与升级

- 金币来源：击杀、波次结算、连杀与完美防守奖励
- 金币消耗：随机招募、部署位扩容、临时增益（战术卡）
- 随机招募池：按门派与稀有度分层，概率随波次略动态调整
- 合并规则：2 合 1，最高 5 级；合并返还少量金币或触发增益（可选）
- 数值成长：每级提升攻防与技能强度，随级递减避免溢出

# 敌人设计

- 普通兵：血量与速度随波次增长，提供基础金币
- 精英：护盾、抗控、溅射、吸血等特性，击杀奖励更高
- 远程兵：站桩输出，惩罚控场不足
- 冲锋兵：快速突进，逼迫及时布防与合并
- 首领：里程碑波出现，阶段机制与范围压制

# 我方单位（门派定位示例）

- 少林：前排格挡与嘲讽，高韧性，减伤光环
- 纯阳：多段连击与真气斩，稳定近战输出
- 万花：治疗、护盾、驱散，核心生存点
- 七秀：高攻速远程，位移或短暂无敌（合并强化）
- 藏剑：爆发与斩杀，对精英与首领增伤
- 天策：冲锋拦截与击退，控线与节奏调整
- 唐门：陷阱与持续伤害，控场与削弱
- 明教：暗影位移与混沌增益，随机性

# 关卡与波次

- 会战弓月城为第一章节，内含 10–20 波
- 难度曲线：线性成长叠加关键节点（精英潮与首领）
- 波次构成：单位类型比例、刷新节奏、线路权重与事件
- 里程碑波：提供奖励或解锁新招募概率

# UI 与交互

- 顶部：波次与倒计时、金币、暂停与设置
- 中部：战场与路径可视化，单位血条与状态图标
- 底部：随机招募按钮、单位卡池、拖拽合并与部署格
- 点按选择、拖拽合并与放置、长按查看单位详情
- 反馈：击杀飘字、合并动画、音效提示与震动（移动端可选）

# 随机与公平性

- 刷新位置：按线路权重与单位密度软平衡
- 招募随机：基础概率固定，保底机制与轻度天井
- 事件随机：限定非致命项，如临时增益与额外金币机会

# 技术方案

- 纯前端：HTML、CSS、Canvas、WebAudio
- 帧同步：固定时间步与调度队列
- 逻辑模块：状态管理、碰撞与寻路、波次编排、随机引擎
- 渲染策略：Canvas 分层，血条与特效独立层
- 持久化：LocalStorage 保存进度、设置与统计
- 部署：GitHub Pages 静态托管，工作流上传 `site` 目录

# 性能与适配

- 目标设备：移动端优先，1080×1920 参考；桌面自适应安全区
- 性能指标：中端手机在 60 FPS 下支持 40–60 同屏实体
- 优化：对象池、贴图合图、按需渲染、动画节流与 UI 虚拟化
- 触控容错：拖拽吸附、放置预览、高对比 UI 与色弱友好

# 音画与资产

- 视觉风格：水墨与剪影化，保留剑网三意象
- 音效：击杀、合并、招募、技能、首领登场与胜负提示
- 音乐：章节主题与战斗循环，音量与静音开关
- 资产来源：原创与可授权素材，标注来源与许可

# 合规与版权

- 使用官方素材可能涉及版权风险，即使非盈利与私下游玩
- 建议优先使用可商用或创作共用素材，并标注来源
- 若需使用官方元素，建议事先确认授权或遵循公开指引

# MVP 范围

- 1 个章节（会战弓月城）与 12 波敌人，含 2 个首领波
- 6 个基础门派单位，2 合 1 合并升级，最高 3 级
- 金币系统、随机招募、拖拽合并与基础放置
- 基础 UI（资源、波次、战场、招募池）、暂停与设置
- 进度存档、基础音效与特效
- 移动端适配与 GitHub Pages 部署

# 后续拓展

- 更多门派与稀有度、特色技能与协同羁绊
- 战术卡与临时增益、每日挑战与本地排行榜
- 事件系统与分支选择、精英潮与特殊天气
- 皮肤与外观、成就与图鉴
- 多语言支持（简体、繁体、英文）

# 数值草案（示例）

- 初始金币 100；普通招募 20–40；稀有招募 60–80
- 普通兵奖励 3–6；精英 10–15；首领 50–80
- 圣女生命 100；触及伤害：普通 5、精英 12、首领 25
- 合并提升：攻击 +35%、防御 +20%、技能 +1 段（随级递减）

# 测试与验证

- 沙盒模式：无限金币与可视化状态
- 回放与快照：保存关键帧定位数值异常与随机分布问题
- 兼容性：Chrome、Edge、Safari 最新版；低端设备负载与降级方案

# 里程碑计划

- 里程碑 1：玩法雏形与数值草案、UI 原型与沙盒验证
- 里程碑 2：MVP 门派与敌人、波次脚本与部署上线
- 里程碑 3：性能优化与美术提质、首领机制与事件系统
- 里程碑 4：扩展门派与成就图鉴、国际化与可访问性

